!function(e,t,i,r,s,a,n){e.extend(tribe_ev.fn,{set_form:function(t){var i=!1,s=e("body"),a=e("#tribe_events_filters_form"),n=e("#tribe-bar-form");s.addClass("tribe-reset-on"),a.length&&(a.tribe_clear_form(),a.find(".ui-slider").length&&(i=!0,e("#tribe_events_filters_form .ui-slider").each(function(){var t=e(this).attr("id"),i=e("#"+t),r=i.prev(),s=r.prev(),a=i.slider("option");i.slider("values",0,a.min),i.slider("values",1,a.max),s.text(a.min+" - "+a.max),r.val("")}))),n.length&&n.tribe_clear_form(),t=r.parse_string(t),e.each(t,function(t,i){if("action"!==t){var r,s=decodeURIComponent(t);if(1===i.length)Array.isArray(i)&&(i=i[0]),i=decodeURIComponent(i.replace(/\+/g,"%20")),e('[name="'+s+'"]').is('input[type="text"], input[type="hidden"]')?e('[name="'+s+'"]').val(i):e('[name="'+s+'"][value="'+i+'"]').is(":checkbox, :radio")?e('[name="'+s+'"][value="'+i+'"]').prop("checked",!0):e('[name="'+s+'"]').is("select")&&e('select[name="'+s+'"] option[value="'+i+'"]').attr("selected",!0);else for(var a=0;a<i.length;a++)r=e('[name="'+s+'"][value="'+i[a]+'"]'),r.is(":checkbox, :radio")?r.prop("checked",!0):e('select[name="'+s+'"] option[value="'+i[a]+'"]').attr("selected",!0)}}),i&&e("#tribe_events_filters_form .ui-slider").each(function(){var t=e(this).attr("id"),i=e("#"+t),r=i.prev(),s=r.val().split("-");if(""!==s[0]){var a=r.prev();i.slider("values",0,s[0]),i.slider("values",1,s[1]),a.text(s[0]+" - "+s[1]),i.slider("refresh")}}),s.removeClass("tribe-reset-on")},update_current_filter:function(t,i){var r=e(t);if(r.closest(".tribe_events_filter_item").removeClass("active"),"slider"!==i){r.closest(".tribe_events_filter_item").find(".tribe-filter-status").text("");var s=r.serialize(),a="",n="";if(i=r.attr("type"),r.data("select2")){var l=r.select2("data");if(!l)return;l.text?r.closest(".tribe_events_filter_item").find(".tribe-filter-status").text(l.text.trim()):Array.isArray(l)&&(a=[],e(l).each(function(){a.push(this.text)}),0<a.length&&(n="",1<a.length&&(n=' <span class="tribe-events-filter-count">+'+(a.length-1)+"</span>"),r.closest(".tribe_events_filter_item").addClass("active").find(".tribe-filter-status").text(a[0].trim()).append(n)))}else"checkbox"===i&&(s=[],a=[],r.closest(".tribe_events_filter_item").find("input:checked").each(function(){s.push(e(this).val()),"tribe_featuredevent[]"===e(this).attr("name")?a.push(tribe_filter.featured_active_filter):a.push(e(this).closest("label").text())}),a&&(n="",1<a.length&&(n=' <span class="tribe-events-filter-count">+'+(a.length-1)+"</span>"),r.closest(".tribe_events_filter_item").addClass("active").find(".tribe-filter-status").text(a[0]).append(n)))}else{var o=r.slider("values");if(o){var _=tribe_filter.currency_symbol+o[0],c=tribe_filter.currency_symbol+o[1];tribe_filter.reverse_position&&(_=o[0]+tribe_filter.currency_symbol,c=o[1]+tribe_filter.currency_symbol),r.closest(".tribe_events_filter_item").addClass("active").find(".tribe-filter-status").text(_+" - "+c)}}},toggle_child_fields:function(t,i){e(".child-"+t).each(function(){i?e(this).slideUp():e(this).slideToggle();var t=r.get_parent_cat_id(this,!1);i&&t&&(e(this).toggleClass("closed"),r.toggle_child_fields(t,i))})},category_update:function(t){var i=e(t),s=i.attr("type"),a="";"tribe_eventcategory[]"===i.attr("name")&&"checkbox"===s&&(a=r.get_parent_cat_id(t,"closest"),a&&(i.closest("li").removeClass("closed"),r.toggle_child_cat_fields(a,i.prop("checked"))))},toggle_child_cat_fields:function(t,i){e(".child-"+t).each(function(){i?(e(this).slideDown(),e(this).find("input").prop("checked",!0)):e(this).find("input").prop("checked",!1);var t=r.get_parent_cat_id(this,!1);t&&(e(this).removeClass("closed"),r.toggle_child_cat_fields(t,i))})},get_parent_cat_id:function(t,i){var r="";return r="closest"===i?e.grep(e(t).closest("li").attr("class").split(" "),function(e){return 0===e.indexOf("parent-")}).join():"parent"===i?e.grep(e(t).parent().attr("class").split(" "),function(e){return 0===e.indexOf("parent-")}).join():e.grep(e(t).attr("class").split(" "),function(e){return 0===e.indexOf("parent-")}).join(),r=e.grep(r.split("-"),function(e){return e>0}).join()}}),e(document).ready(function(){function n(e){(e||"filters"===s.ajax_trigger&&t.v_width<t.mobile_break)&&(g.addClass("tribe-filters-closed").removeClass("tribe-filters-open"),tribe_storage&&tribe_storage.setItem("tribe_events_filters_wrapper","closed"),s.ajax_trigger="")}function l(){g.removeClass("tribe-filters-closed").removeClass("tribe-ajax-success").addClass("tribe-filters-open"),tribe_storage&&tribe_storage.setItem("tribe_events_filters_wrapper","open")}function o(){g.is(".tribe-filters-closed")?l():n(!0)}function _(){v.find(".tribe-events-filter-select2").each(function(){var t=e(this);t.find("input.tribe-dropdown").val(null).trigger("change")})}function c(){v.find(".tribe_events_filter_item.active").each(function(){e(this).removeClass("active")}),v.find(".tribe-filter-status").each(function(){e(this).text("")})}function f(){t.v_width<t.mobile_break&&n(!0)}function d(){"past"===s.view||"list"===s.view||"photo"===s.view||"map"===s.view?(s.paged=1,"past"!==s.view&&"list"!==s.view||s.filter_cats&&(t.cur_url=e("#tribe-events-header").attr("data-baseurl"))):"month"===s.view?(s.date=e("#tribe-events-header").attr("data-date"),s.filter_cats?t.cur_url=e("#tribe-events-header").attr("data-baseurl"):t.cur_url=r.url_path(document.URL)):"week"!==s.view&&"day"!==s.view||(s.date=e("#tribe-events-header").attr("data-date"))}function u(){r.disable_inputs("#tribe_events_filters_form","input, select"),s.popping=!1,d(),"map"===s.view?a.pushstate?r.pre_ajax(function(){e(i).trigger("tribe_ev_runAjax"),e(i).trigger("run-ajax.tribe"),s.ajax_trigger="filters"}):r.pre_ajax(function(){e(i).trigger("tribe_ev_reloadOldBrowser"),e(i).trigger("reload-old-browser.tribe")}):r.pre_ajax(function(){e(i).trigger("tribe_ev_runAjax"),e(i).trigger("run-ajax.tribe"),s.ajax_trigger="filters"})}e(".tribe_events_filter_item").filter(":last").addClass("tribe_last_child");var v=e("#tribe_events_filters_form"),p=e(".tribe-events-filters-horizontal"),b=e("#tribe-events"),g=e("body"),h=!(!b.length||!b.tribe_has_attr("data-hover-filters")||1!==b.data("hover-filters")),m=e("#tribe_events_filter_item_eventcategory");if(e("#tribe_events_filter_item_eventcategory").length&&s.category&&(s.filter_cats=!0),tribe_storage){var x=tribe_storage.getItem("tribe_events_filters_wrapper");null==x&&g.is(".tribe-filters-closed")&&(x="closed"),x&&"closed"==x?n(!0):x&&"open"==x&&l(),e(".tribe_events_filter_item").each(function(){var t=e(this),i=t.attr("id"),r=tribe_storage.getItem(i);r&&"closed"==r&&t.addClass("closed")})}if(e("#tribe_events_filters_wrapper").on("click","#tribe_events_filters_reset",function(t){t.preventDefault(),g.addClass("tribe-reset-on"),v.tribe_clear_form(),v.find(".ui-slider").length&&e("#tribe_events_filters_form .ui-slider").each(function(){var t=e(this).attr("id"),i=e("#"+t),r=i.prev(),s=r.prev(),a=i.slider("option");i.slider("values",0,a.min),i.slider("values",1,a.max),s.text(a.min+" - "+a.max),r.val("")}),p.length&&e(".tribe_events_filter_item").addClass("closed"),_(),c(),v.submit(),g.removeClass("tribe-reset-on")}).on("click","#tribe_events_filters_toggle",function(e){e.preventDefault(),o()}),g.on("click",function(){p.length&&!h&&e(".tribe_events_filter_item").addClass("closed")}).on("click",".tribe-events-filter-group",function(e){p.length&&!h&&e.stopPropagation()}),h&&v.on("mouseover",".tribe_events_filter_item",function(){p.length&&e(this).removeClass("closed")}).on("mouseout",".tribe_events_filter_item",function(){p.length&&e(".tribe_events_filter_item").addClass("closed")}),v.on("click","h3",function(t){if(!p.length||!h){var i=e(this),r=i.parent(),s=r.attr("id");p.length&&(t.stopPropagation(),e(".tribe_events_filter_item").not(r).addClass("closed")),r.hasClass("closed")?(r.removeClass("closed"),tribe_storage&&tribe_storage.setItem(s,"open")):(r.addClass("closed"),tribe_storage&&tribe_storage.setItem(s,"closed"))}}),f(),e(i).on("ajax-success.tribe",function(){n(!1)}).on("resize-complete.tribe",f),v.on("submit",function(t){"change_view"!==tribe_events_bar_action&&(t.preventDefault(),s.popping=!1,d(),r.pre_ajax(function(){e(i).trigger("tribe_ev_runAjax"),e(i).trigger("run-ajax.tribe"),s.ajax_trigger="filters"}))}),a.live_ajax()&&a.pushstate&&(v.find('input[type="submit"]').remove(),e("#tribe_events_filter_item_eventcategory").length&&s.category&&e("#tribe_events_filter_item_eventcategory input, #tribe_events_filter_item_eventcategory select").on("change",function(){r.setup_ajax_timer(function(){u()})}),v.on("slidechange",".ui-slider",function(){r.update_current_filter(this,"slider"),r.setup_ajax_timer(function(){u()})}).on("change","input, select",function(){r.category_update(this),r.update_current_filter(this),s.filter_cats&&"tribe_events_filter_item_eventcategory"===e(this).parents(".tribe_events_filter_item").attr("id")||r.setup_ajax_timer(function(){u()})})),e(i).on("tribe_ev_collectParams",function(){var e=r.serialize("#tribe_events_filters_form","input, select");e.length?(s.filters=!0,s.params=s.params+"&"+e,"map"!==s.view&&(s.url_params.length?s.url_params=s.url_params+"&"+e:s.url_params=e)):s.filters=!1}),e(i).on("collect-params.tribe",function(){s.filter_cats&&e("#tribe_events_filter_item_eventcategory option:selected, #tribe_events_filter_item_eventcategory input:checked").remove();var t=r.serialize("#tribe_events_filters_form","input, select");s.url_params.length&&t.length?s.url_params=s.url_params+"&"+t:t.length&&(s.url_params=t)}),m.length&&s.category&&(g.addClass("tribe-reset-on"),m.find('option[data-slug="'+s.category+'"]').attr("selected",!0),m.find('input[data-slug="'+s.category+'"]').attr("checked","checked"),g.removeClass("tribe-reset-on")),m.length){var y=[];m.find("input:checked").each(function(){y.push(e(this).val())}),y.length&&m.find("li").each(function(){e(this).removeClass("closed").slideDown()})}e(document).on("click",".tribe-toggle-child",function(t){t.preventDefault();var i=r.get_parent_cat_id(this,"parent");e(this).parent().toggleClass("closed"),r.toggle_child_fields(i,e(this).parent().hasClass("closed"))})})}(jQuery,tribe_ev.data,tribe_ev.events,tribe_ev.fn,tribe_ev.state,tribe_ev.tests,tribe_debug);