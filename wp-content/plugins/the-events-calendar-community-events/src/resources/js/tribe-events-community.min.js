var tribe_community_events=tribe_community_events||{};!function(e,t,i){"use strict";i.$window=t(e),i.$datepickers=t(),i.$timepickers=t(),i.date_to_ymd=function(e){var t=e.getDate(),i=e.getMonth()+1,a=e.getFullYear();return a+"-"+(i<=9?"0"+i:i)+"-"+(t<=9?"0"+t:t)},i.init_linked_posts_handle=function(){var e=t(".move-linked-post-group"),i=t(".saved-linked-post");e.addClass("hidden"),i.on("change",function(){t(i).closest(e).removeClass("hidden"),t(this).find(e).removeClass("hidden")})},i.init_mobile_datetime_input=function(){i.$datepickers=t("#EventStartDate, #EventEndDate"),i.$timepickers=t("#EventStartTime, #EventEndTime"),i.$window.on({"resize.tribe":function(){var e=i.$window.width();e<=568?(i.$datepickers.prop("type","date"),i.$datepickers.on("change.tribe",i.on_change_datepicker).trigger("change"),i.$timepickers.timepicker("option","disableTouchKeyboard",!0)):(i.$datepickers.prop("type","text"),i.$datepickers.off("change.tribe"),i.$timepickers.timepicker("option","disableTouchKeyboard",!1))},load:function(){i.$window.trigger("resize.tribe")}})},i.on_change_datepicker=function(){var e=t(this),a=i.$datepickers.not(e),n="start",r=t(this).data("datepicker"),o=t.datepicker.parseDate(r.settings.dateFormat||t.datepicker._defaults.dateFormat,e.val(),r.settings),d=t.datepicker.parseDate(r.settings.dateFormat||t.datepicker._defaults.dateFormat,a.val(),r.settings);"EventEndDate"!==e.attr("name")&&"EventEndDate"!==e.attr("id")||(n="end"),"start"===n?(a.attr("min",i.date_to_ymd(o)),d<o&&a.val(i.date_to_ymd(o))):d>o&&a.val(i.date_to_ymd(o))},i.init_local_storage=function(){e.localStorage&&t(".tribe-toggle-column").on("change",function(){var i=t(this),a=i.attr("id");e.localStorage.getItem(a);i.is(":checked")?e.localStorage.removeItem(a):e.localStorage.setItem(a,"1")}).each(function(){var i=t(this),a=i.attr("id"),n=e.localStorage.getItem(a);n&&i.prop("checked",!1).trigger("change")})},i.init_image_input=function(){var e=t(".tribe-image-upload-area "),i=t("#uploadFile");t("#EventImage").change(function(){var a=t(this).val(),n=a.split("\\").pop();t(e).addClass("uploaded"),t(i).val(n),t(i).attr("size",n.length)}),t(".tribe-remove-upload a, .tribe-community-events-preview-image .submitdelete").click(function(i){i.preventDefault(),t(e).removeClass("uploaded has-image"),t("#uploadFile").val("")})},i.init_list_columns_menu=function(){var e=t(".table-menu");t(".table-menu-btn").click(function(){var e=t(this);return e.toggleClass("menu-open").parent().find(".table-menu").toggleClass("table-menu-hidden"),!1}),t(document).click(function(i){t(i.target).is(e)||t(i.target).is(t(e).find("*"))||t(e).addClass("table-menu-hidden")})},i.remove_no_js_class=function(){t(document.getElementById("tribe-events")).removeClass("tribe-no-js").addClass("tribe-js")},i.setup_dropdowns=function(){t(".tribe-dropdown").trigger("change")},t(document).ready(i.init_mobile_datetime_input).ready(i.init_image_input).ready(i.init_list_columns_menu).ready(i.init_local_storage).ready(i.init_linked_posts_handle).ready(i.remove_no_js_class).ready(i.setup_dropdowns)}(window,jQuery,tribe_community_events);